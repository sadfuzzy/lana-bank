version: 1
default_environment: dev
project_id: 608399cc-8e94-418f-a5ff-bdad5cb5a190
environments:
- name: dev
  config:
    plugins:
      extractors:
      - name: tap-postgres
        config:
          host: core-pg
          user: user
          database: pg
          password: password
- name: staging
- name: prod
plugins:
  extractors:
  - name: tap-postgres
    variant: meltanolabs
    pip_url: git+https://github.com/MeltanoLabs/tap-postgres.git
    config:
      json_as_object: true
      flattening_enabled: true
      flattening_max_depth: 10
    select:
    - public-*.*
  loaders:
  - name: target-bigquery
    variant: z3z1ma
    pip_url: git+https://github.com/z3z1ma/target-bigquery.git
    config:
      project: lana-dev-440721
      generate_view: true
  transformers:
  - name: dbt-bigquery
    variant: dbt-labs
    pip_url: dbt-core~=1.3.0 dbt-bigquery~=1.3.0
    config:
      auth_method: service-account
      project: lana-dev-440721
  utilities:
  - name: sqlfluff
    variant: sqlfluff
    pip_url: sqlfluff sqlfluff-templater-dbt dbt-core dbt-bigquery
    settings:
    - name: dataset
      env: DBT_BIGQUERY_DATASET
    - name: keyfile
      env: DBT_BIGQUERY_KEYFILE
    - name: auth_method
      env: DBT_BIGQUERY_AUTH_METHOD
      value: service-account
    - name: project
      env: DBT_BIGQUERY_PROJECT
      value: lana-dev-440721
